{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Google Earth Engine Tile Server API",
  "description": "API for accessing Google Earth Engine datasets as map tiles",
  "type": "object",
  "properties": {
    "baseUrl": {
      "type": "string",
      "description": "Base URL for all API endpoints",
      "const": "https://gee-tile-server.vercel.app"
    },
    "endpoints": {
      "type": "object",
      "properties": {
        "datasets": {
          "type": "object",
          "description": "List available datasets",
          "properties": {
            "url": {
              "type": "string",
              "const": "/api/datasets"
            },
            "method": {
              "type": "string",
              "const": "GET"
            },
            "parameters": {
              "type": "object",
              "properties": {
                "category": {
                  "type": "string",
                  "description": "Filter datasets by category",
                  "enum": ["Vegetation", "Water", "Climate", "Cryosphere", "Hazards", "Land Use"]
                },
                "format": {
                  "type": "string",
                  "description": "Response format",
                  "enum": ["json", "list"],
                  "default": "json"
                }
              }
            },
            "response": {
              "type": "object",
              "properties": {
                "datasets": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object",
                    "properties": {
                      "collection": {"type": "string"},
                      "band": {"type": "string"},
                      "min": {"type": "number"},
                      "max": {"type": "number"},
                      "defaultPalette": {"type": "string"},
                      "description": {"type": "string"},
                      "category": {"type": "string"},
                      "temporalResolution": {"type": "string"},
                      "spatialResolution": {"type": "string"}
                    }
                  }
                },
                "total": {"type": "number"},
                "categories": {
                  "type": "array",
                  "items": {"type": "string"}
                }
              }
            }
          }
        },
        "tiles": {
          "type": "object",
          "description": "Get map tiles for a dataset",
          "properties": {
            "url": {
              "type": "string",
              "const": "/api/tiles"
            },
            "method": {
              "type": "string",
              "const": "GET"
            },
            "requiredParameters": {
              "type": "object",
              "properties": {
                "apikey": {
                  "type": "string",
                  "description": "API key for authentication"
                }
              },
              "required": ["apikey"]
            },
            "optionalParameters": {
              "type": "object",
              "properties": {
                "dataset": {
                  "type": "string",
                  "description": "Dataset name",
                  "enum": ["ndvi", "evi", "ndwi", "temperature", "precipitation", "snow", "fire", "urban"],
                  "default": "ndvi"
                },
                "year": {
                  "type": "string",
                  "description": "Year for data",
                  "default": "2024"
                },
                "month": {
                  "type": "string",
                  "description": "Month 1-12 (optional, for monthly data)"
                },
                "period": {
                  "type": "string",
                  "description": "Time period",
                  "enum": ["monthly", "yearly"],
                  "default": "monthly"
                },
                "palette": {
                  "type": "string",
                  "description": "Color palette as comma-separated hex colors"
                },
                "opacity": {
                  "type": "string",
                  "description": "Opacity level 0.0-1.0",
                  "default": "1.0"
                }
              }
            },
            "response": {
              "type": "object",
              "properties": {
                "tile_url": {
                  "type": "string",
                  "description": "Google Earth Engine tile URL"
                },
                "dataset": {"type": "string"},
                "description": {"type": "string"},
                "parameters": {
                  "type": "object",
                  "properties": {
                    "year": {"type": "string"},
                    "month": {"type": "string"},
                    "period": {"type": "string"},
                    "palette": {"type": "string"},
                    "opacity": {"type": "string"}
                  }
                }
              },
              "required": ["tile_url", "dataset", "description"]
            }
          }
        },
        "test": {
          "type": "object",
          "description": "Test API connectivity",
          "properties": {
            "url": {
              "type": "string",
              "const": "/api/test"
            },
            "method": {
              "type": "string",
              "const": "GET"
            },
            "response": {
              "type": "object",
              "properties": {
                "message": {"type": "string"},
                "timestamp": {"type": "string"},
                "method": {"type": "string"},
                "url": {"type": "string"}
              }
            }
          }
        }
      }
    },
    "datasets": {
      "type": "object",
      "description": "Available datasets and their configurations",
      "properties": {
        "ndvi": {
          "type": "object",
          "properties": {
            "name": {"const": "Normalized Difference Vegetation Index"},
            "category": {"const": "Vegetation"},
            "description": {"const": "Measures vegetation health and density"},
            "defaultPalette": {"const": "FF0000,FFFF00,00FF00"},
            "temporalResolution": {"const": "16 days"},
            "spatialResolution": {"const": "250m"}
          }
        },
        "evi": {
          "type": "object",
          "properties": {
            "name": {"const": "Enhanced Vegetation Index"},
            "category": {"const": "Vegetation"},
            "description": {"const": "Improved vegetation index with better sensitivity"},
            "defaultPalette": {"const": "FF0000,FFFF00,00FF00"},
            "temporalResolution": {"const": "16 days"},
            "spatialResolution": {"const": "250m"}
          }
        },
        "ndwi": {
          "type": "object",
          "properties": {
            "name": {"const": "Normalized Difference Water Index"},
            "category": {"const": "Water"},
            "description": {"const": "Detects water bodies and moisture"},
            "defaultPalette": {"const": "0000FF,FFFFFF,00FF00"},
            "temporalResolution": {"const": "16 days"},
            "spatialResolution": {"const": "250m"}
          }
        },
        "temperature": {
          "type": "object",
          "properties": {
            "name": {"const": "Land Surface Temperature"},
            "category": {"const": "Climate"},
            "description": {"const": "Thermal data showing surface temperature"},
            "defaultPalette": {"const": "0000FF,00FFFF,FFFF00,FF0000"},
            "temporalResolution": {"const": "Daily"},
            "spatialResolution": {"const": "1km"}
          }
        },
        "precipitation": {
          "type": "object",
          "properties": {
            "name": {"const": "Precipitation (IMERG)"},
            "category": {"const": "Climate"},
            "description": {"const": "Rainfall measurements from IMERG"},
            "defaultPalette": {"const": "FFFFFF,0000FF,00FFFF,00FF00,FFFF00,FF0000"},
            "temporalResolution": {"const": "30 minutes"},
            "spatialResolution": {"const": "10km"}
          }
        },
        "snow": {
          "type": "object",
          "properties": {
            "name": {"const": "Snow Cover"},
            "category": {"const": "Cryosphere"},
            "description": {"const": "Snow extent mapping"},
            "defaultPalette": {"const": "FFFFFF,0000FF"},
            "temporalResolution": {"const": "Daily"},
            "spatialResolution": {"const": "500m"}
          }
        },
        "fire": {
          "type": "object",
          "properties": {
            "name": {"const": "Fire Detection"},
            "category": {"const": "Hazards"},
            "description": {"const": "Active fire monitoring"},
            "defaultPalette": {"const": "000000,FF0000,FFFF00,00FF00"},
            "temporalResolution": {"const": "Daily"},
            "spatialResolution": {"const": "1km"}
          }
        },
        "urban": {
          "type": "object",
          "properties": {
            "name": {"const": "WorldCover Land Use"},
            "category": {"const": "Land Use"},
            "description": {"const": "Land cover classification"},
            "defaultPalette": {"const": "006400,FFA500,FFFF00,FF0000,0000FF,FFFFFF,8B4513,808080"},
            "temporalResolution": {"const": "Annual"},
            "spatialResolution": {"const": "10m"}
          }
        }
      }
    },
    "errorResponses": {
      "type": "object",
      "properties": {
        "403": {
          "type": "object",
          "properties": {
            "error": {"const": "Invalid API key"}
          }
        },
        "500": {
          "type": "object",
          "properties": {
            "error": {"type": "string"},
            "hint": {"type": "string"}
          }
        }
      }
    },
    "integration": {
      "type": "object",
      "description": "Integration examples for different platforms",
      "properties": {
        "mapbox": {
          "type": "string",
          "description": "JavaScript code for Mapbox integration"
        },
        "leaflet": {
          "type": "string",
          "description": "JavaScript code for Leaflet integration"
        },
        "python": {
          "type": "string",
          "description": "Python code using requests library"
        }
      }
    }
  }
} 